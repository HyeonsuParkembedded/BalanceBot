# BalanceBot Controller

ESP32 ê¸°ë°˜ ìê°€ê· í˜• ë¡œë´‡ì„ ì œì–´í•˜ëŠ” Flutter ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

- **BLE ë¬´ì„  í†µì‹ **: `flutter_blue_plus`ë¥¼ ì‚¬ìš©í•œ ì•ˆì •ì ì¸ ESP32 Bluetooth ì—°ê²°
- **ì‹¤ì‹œê°„ ì œì–´**: ì¡°ì´ìŠ¤í‹± ê¸°ë°˜ ë¡œë´‡ ì¡°ì¢…
- **PID íŠœë‹**: ì‹¤ì‹œê°„ PID íŒŒë¼ë¯¸í„° ì¡°ì • 
- **ìƒíƒœ ëª¨ë‹ˆí„°ë§**: ë¡œë´‡ì˜ ê°ë„, ì†ë„, ë°°í„°ë¦¬ ìƒíƒœ í™•ì¸
- **ì„œë³´ ê¸°ë¦½**: ë„˜ì–´ì§„ ë¡œë´‡ ìë™ ê¸°ë¦½ ê¸°ëŠ¥
- **í˜„ëŒ€ì ì¸ UI**: Material Design 3 ê¸°ë°˜ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤

## ğŸ“¦ ì‚¬ìš©ëœ ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬

- **flutter_blue_plus**: ìµœì‹  Bluetooth Low Energy (BLE) í†µì‹ 
- **shared_preferences**: ì•± ì„¤ì • ë° PID ê°’ ì €ì¥
- **permission_handler**: Android ê¶Œí•œ ê´€ë¦¬
- **flutter_svg**: SVG ì•„ì´ì½˜ ë° ê·¸ë˜í”½ ì§€ì›

## ğŸ“± APK ë¹Œë“œ

### ìë™ ë¹Œë“œ (ê¶Œì¥)
```powershell
# PowerShellì—ì„œ ì‹¤í–‰
.\build_apks.ps1
```

### ìˆ˜ë™ ë¹Œë“œ
```bash
# ë””ë²„ê·¸ APK (ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©)
flutter build apk --debug

# ë¦´ë¦¬ì¦ˆ APK (ë°°í¬ìš©)
flutter build apk --release
```

ë¹Œë“œëœ APK íŒŒì¼ì€ ë‹¤ìŒ ìœ„ì¹˜ì— ì €ì¥ë©ë‹ˆë‹¤:
- **ìë™ ë¹Œë“œ**: `apks/` í´ë”ì— íƒ€ì„ìŠ¤íƒ¬í”„ì™€ í•¨ê»˜ ì €ì¥
- **ìˆ˜ë™ ë¹Œë“œ**: `build/app/outputs/flutter-apk/` í´ë”

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### 1. Flutter ì„¤ì¹˜
```bash
# Flutter ì˜ì¡´ì„± ì„¤ì¹˜
flutter pub get

# ì—°ê²°ëœ ê¸°ê¸° í™•ì¸
flutter devices
```

### 2. ë””ë²„ê·¸ ì‹¤í–‰
```bash
# ì•ˆë“œë¡œì´ë“œ ê¸°ê¸°/ì—ë®¬ë ˆì´í„°ì—ì„œ ì‹¤í–‰
flutter run

# í•« ë¦¬ë¡œë“œë¡œ ê°œë°œ
flutter run --hot
```

### 3. ìš”êµ¬ì‚¬í•­
- Flutter SDK 3.0+
- Android SDK (ì•ˆë“œë¡œì´ë“œ ë¹Œë“œìš©)
- ì•ˆë“œë¡œì´ë“œ ê¸°ê¸°ì˜ Bluetooth ê¶Œí•œ

## ğŸ¤– ë¡œë´‡ ì—°ê²°

1. ESP32 BalanceBot íŒì›¨ì–´ê°€ ì„¤ì¹˜ëœ ë¡œë´‡ ì „ì› ì¼œê¸°
2. ì•±ì—ì„œ "ê¸°ê¸° ê²€ìƒ‰" ë²„íŠ¼ í´ë¦­
3. "BalanceBot" ê¸°ê¸° ì„ íƒí•˜ì—¬ ì—°ê²°
4. ì—°ê²° ì™„ë£Œ í›„ ì œì–´ ê°€ëŠ¥

## ğŸ“‹ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
lib/
â”œâ”€â”€ main.dart              # ì•± ì§„ì…ì 
â”œâ”€â”€ models/                # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ balance_pid_settings.dart  # PID ì„¤ì • ëª¨ë¸
â”‚   â””â”€â”€ pid_settings.dart          # ê¸°ë³¸ PID ëª¨ë¸
â”œâ”€â”€ screens/               # í™”ë©´ UI
â”‚   â”œâ”€â”€ control_screen.dart        # ë©”ì¸ ì œì–´ í™”ë©´
â”‚   â””â”€â”€ control_screen_v2.dart     # í–¥ìƒëœ ì œì–´ í™”ë©´
â”œâ”€â”€ services/              # í†µì‹  ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ ble_service.dart           # BLE í†µì‹  (flutter_blue_plus)
â”œâ”€â”€ utils/                 # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ design_tokens.dart         # ë””ìì¸ ì‹œìŠ¤í…œ
â”‚   â””â”€â”€ protocol_utils.dart        # í†µì‹  í”„ë¡œí† ì½œ
â””â”€â”€ widgets/               # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ„ì ¯
    â”œâ”€â”€ balance_pid_widget.dart    # PID íŠœë‹ ìœ„ì ¯
    â”œâ”€â”€ connection_status_widget.dart  # ì—°ê²° ìƒíƒœ
    â”œâ”€â”€ pid_control_widget.dart    # PID ì œì–´ íŒ¨ë„
    â”œâ”€â”€ rc_joystick_widget.dart    # ì¡°ì´ìŠ¤í‹± ì»¨íŠ¸ë¡¤
    â”œâ”€â”€ robot_control_widget.dart  # ë¡œë´‡ ì œì–´
    â””â”€â”€ robot_status_widget.dart   # ìƒíƒœ í‘œì‹œ
```

## ğŸ› ï¸ ê°œë°œ ì°¸ê³ ì‚¬í•­

- **BLE ì„œë¹„ìŠ¤**: `flutter_blue_plus`ë¥¼ í†µí•œ ESP32ì™€ì˜ í†µì‹  í”„ë¡œí† ì½œ
- **ë””ìì¸ ì‹œìŠ¤í…œ**: ì¼ê´€ëœ UIë¥¼ ìœ„í•œ ë””ìì¸ í† í° ì ìš© 
- **ìƒíƒœ ê´€ë¦¬**: Flutter ë‚´ì¥ StatefulWidget ì‚¬ìš©
- **ê¶Œí•œ ê´€ë¦¬**: Android Bluetooth ê¶Œí•œ ìë™ ìš”ì²­
- **ì•„í‚¤í…ì²˜**: ê¹”ë”í•œ ì„œë¹„ìŠ¤/ìœ„ì ¯ ë¶„ë¦¬ êµ¬ì¡°

## ğŸ”§ ë¹Œë“œ ìš”êµ¬ì‚¬í•­

- **Flutter SDK**: 3.0 ì´ìƒ
- **Android SDK**: API 21 (Android 5.0) ì´ìƒ  
- **Java**: JDK 17 (Android Gradle Plugin í˜¸í™˜)
- **Bluetooth**: BLE ì§€ì› ì•ˆë“œë¡œì´ë“œ ê¸°ê¸°

## ğŸ†• ìµœì‹  ì—…ë°ì´íŠ¸ (2025.09.20)

- âœ… **ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜„ëŒ€í™”**: `flutter_bluetooth_serial` â†’ `flutter_blue_plus` ë§ˆì´ê·¸ë ˆì´ì…˜
- âœ… **Java í˜¸í™˜ì„±**: Java 8 deprecation ê²½ê³  ì™„ì „ í•´ê²°
- âœ… **ì½”ë“œ ì •ë¦¬**: ë¶ˆí•„ìš”í•œ third_party ì˜ì¡´ì„± ì œê±°
- âœ… **ë¬¸ì„œí™”**: Doxygenì„ í†µí•œ ì™„ì „í•œ ì½”ë“œ ë¬¸ì„œí™”
- âœ… **ë¹Œë“œ ìµœì í™”**: ë” ë¹ ë¥´ê³  ì•ˆì •ì ì¸ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤

## ğŸ“ ë¬¸ì˜

í”„ë¡œì íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ë‚˜ ë²„ê·¸ ë¦¬í¬íŠ¸ëŠ” GitHub Issuesë¥¼ ì´ìš©í•´ ì£¼ì„¸ìš”.
